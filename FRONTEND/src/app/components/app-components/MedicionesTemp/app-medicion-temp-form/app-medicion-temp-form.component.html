<div class="modal-overlay" *ngIf="showModal" (click)="cerrarModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>{{ isEditMode ? 'Editar Medición de Temperatura' : 'Crear Medición de Temperatura' }}</h2>
      <button type="button" class="close-btn" (click)="cerrarModal()">&times;</button>
    </div>
    <div class="modal-body">
      <form [formGroup]="medicionForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
          <label for="id_sensor">Sensor:</label>
          <select id="id_sensor" formControlName="id_sensor" class="form-control">
            <option value="">Seleccione un sensor</option>
            <option *ngFor="let sensor of sensores" [value]="sensor.id_sensor">
              {{ sensor.codigo_serie }} (ID: {{ sensor.id_sensor }})
            </option>
          </select>
          <div class="error-message" *ngIf="isFieldInvalid('id_sensor')">
            {{ getErrorMessage('id_sensor') }}
          </div>
        </div>

        <div class="form-group">
          <label for="id_lote">Lote:</label>
          <select id="id_lote" formControlName="id_lote" class="form-control">
            <option value="">Seleccione un lote</option>
            <option *ngFor="let lote of lotes" [value]="lote.id_lote">
              Lote {{ lote.id_lote }} - Vacuna {{ lote.id_vacuna }}
            </option>
          </select>
          <div class="error-message" *ngIf="isFieldInvalid('id_lote')">
            {{ getErrorMessage('id_lote') }}
          </div>
        </div>

        <div class="form-group">
          <label for="temperatura">Temperatura (°C):</label>
          <input type="number" id="temperatura" formControlName="temperatura" class="form-control" step="0.1">
          <div class="error-message" *ngIf="isFieldInvalid('temperatura')">
            {{ getErrorMessage('temperatura') }}
          </div>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" (click)="onCancel()">Cancelar</button>
          <button type="submit" class="btn btn-primary" [disabled]="medicionForm.invalid">
            {{ isEditMode ? 'Actualizar' : 'Crear' }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>