<div class="modal-overlay" *ngIf="showModal">
    <div class="modal-container">
        <form [formGroup]="sensorTempForm" (ngSubmit)="onSubmit()">
            <h1 class="page-tittle">{{ isEditMode ? 'Editar Sensor de Temperatura' : 'Registrar Sensor de Temperatura' }}</h1>
            <div class="input-container">
                <label for="codigo_serie">
                    <svg class="icono-1" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                        <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                        <g id="SVGRepo_iconCarrier">
                            <path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </g>
                    </svg>
                    <span>Código Serie</span>
                </label>
                <div class="input" [ngClass]="{'is-invalid': isFieldInvalid('codigo_serie')}">
                    <input type="text" id="codigo_serie" formControlName="codigo_serie" placeholder="Ingrese el código serie">
                </div>
                <div class="text-error-message" *ngIf="isFieldInvalid('codigo_serie')">
                    {{ getErrorMessage('codigo_serie') }}
                </div>
            </div>
            <div class="input-container">
                <label for="id_ubicacion_actual">
                    <svg class="icono-1" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                        <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                        <g id="SVGRepo_iconCarrier">
                            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                        </g>
                    </svg>
                    <span>Ubicación Actual</span>
                </label>
                <div class="input" [ngClass]="{'is-invalid': isFieldInvalid('id_ubicacion_actual')}">
                    <select id="id_ubicacion_actual" formControlName="id_ubicacion_actual">
                        <option value="">Seleccione una ubicación</option>
                        <option *ngFor="let ubicacion of ubicaciones" [value]="ubicacion.id_ubicacion">{{ ubicacion.nombre }} - {{ ubicacion.tipo }}</option>
                    </select>
                </div>
                <div class="text-error-message" *ngIf="isFieldInvalid('id_ubicacion_actual')">
                    {{ getErrorMessage('id_ubicacion_actual') }}
                </div>
            </div>
            <div class="input-container">
                <label for="ultima_calibracion">
                    <svg class="icono-1" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                        <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                        <g id="SVGRepo_iconCarrier">
                            <path d="M7 20V4C7 3.44772 7.44772 3 8 3H16C16.5523 3 17 3.44772 17 4V20M7 20H5C4.44772 20 4 19.5523 4 19V7C4 6.44772 4.44772 6 5 6H7M7 20H17M17 20H19C19.5523 20 20 19.5523 20 19V7C20 6.44772 19.5523 6 19 6H17M9 6H15M9 10H15M9 14H15" stroke="currentColor" stroke-width="2"/>
                        </g>
                    </svg>
                    <span>Última Calibración</span>
                </label>
                <div class="input" [ngClass]="{'is-invalid': isFieldInvalid('ultima_calibracion')}">
                    <input type="date" id="ultima_calibracion" formControlName="ultima_calibracion">
                </div>
                <div class="text-error-message" *ngIf="isFieldInvalid('ultima_calibracion')">
                    {{ getErrorMessage('ultima_calibracion') }}
                </div>
            </div>
            <div class="modal-actions">
                <button type="button" (click)="onCancel()" class="btn btn-secondary">Cancelar</button>
                <button type="submit" class="btn btn-primary">{{ isEditMode ? 'Actualizar' : 'Crear' }}</button>
            </div>
        </form>
    </div>
</div>