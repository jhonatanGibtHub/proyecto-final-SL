<div class="modal-overlay" *ngIf="showModal">
    <div class="modal-container">
        <form [formGroup]="sensorTempForm" (ngSubmit)="onSubmit()">
            <h1 class="page-tittle">{{ isEditMode ? 'Editar Sensor de Temperatura' : 'Registrar Sensor de Temperatura' }}</h1>

            <div class="input-container">
                <label for="codigo_serie">
                    <svg class="icono-1" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M17 3.5H7C4 3.5 2 5 2 8.5V15.5C2 19 4 20.5 7 20.5H17C20 20.5 22 19 22 15.5V8.5C22 5 20 3.5 17 3.5ZM6.75 16C6.75 16.41 6.41 16.75 6 16.75C5.59 16.75 5.25 16.41 5.25 16V8C5.25 7.59 5.59 7.25 6 7.25C6.41 7.25 6.75 7.59 6.75 8V16ZM9.75 16C9.75 16.41 9.41 16.75 9 16.75C8.59 16.75 8.25 16.41 8.25 16V15C8.25 14.59 8.59 14.25 9 14.25C9.41 14.25 9.75 14.59 9.75 15V16ZM9.75 12C9.75 12.41 9.41 12.75 9 12.75C8.59 12.75 8.25 12.41 8.25 12V8C8.25 7.59 8.59 7.25 9 7.25C9.41 7.25 9.75 7.59 9.75 8V12ZM12.75 16C12.75 16.41 12.41 16.75 12 16.75C11.59 16.75 11.25 16.41 11.25 16V8C11.25 7.59 11.59 7.25 12 7.25C12.41 7.25 12.75 7.59 12.75 8V16ZM15.75 16C15.75 16.41 15.41 16.75 15 16.75C14.59 16.75 14.25 16.41 14.25 16V12C14.25 11.59 14.59 11.25 15 11.25C15.41 11.25 15.75 11.59 15.75 12V16ZM15.75 9C15.75 9.41 15.41 9.75 15 9.75C14.59 9.75 14.25 9.41 14.25 9V8C14.25 7.59 14.59 7.25 15 7.25C15.41 7.25 15.75 7.59 15.75 8V9ZM18.75 16C18.75 16.41 18.41 16.75 18 16.75C17.59 16.75 17.25 16.41 17.25 16V8C17.25 7.59 17.59 7.25 18 7.25C18.41 7.25 18.75 7.59 18.75 8V16Z"></path>
                    </svg>
                    <span>Código Serie</span>
                </label>
                <div class="input" [ngClass]="{'is-invalid': isFieldInvalid('codigo_serie')}">
                    <input type="text" id="codigo_serie" formControlName="codigo_serie" placeholder="Ej. S-123Z-MODEL">
                </div>
                <div class="text-error-message" *ngIf="isFieldInvalid('codigo_serie')">
                    {{ getErrorMessage('codigo_serie') }}
                </div>
            </div>

            <div class="input-container">
                <label for="id_ubicacion_actual">
                    <svg class="icono-1" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"></path>
                    </svg>
                    <span>Ubicación del sensor</span>
                </label>
                <div class="input" [ngClass]="{'is-invalid': isFieldInvalid('id_ubicacion_actual')}">
                    <mat-form-field appearance="outline">
                        <mat-select id="id_ubicacion_actual" formControlName="id_ubicacion_actual">
                            <mat-option value="">Seleccione una ubicación</mat-option>
                            <mat-option *ngFor="let item of ubicaciones" [value]="item.id_ubicacion">
                                {{ item.nombre }} - {{ item.direccion }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div class="text-error-message" *ngIf="isFieldInvalid('id_ubicacion_actual')">
                    {{ getErrorMessage('id_ubicacion_actual') }}
                </div>
            </div>

            <div class="input-container">
                <label for="ultima_calibracion">
                    <svg class="icono-1" viewBox="0 0 32 32" fill="currentColor">
                        <path d="M27.472 25.67l3.511 2.664c0.764-1.983 0.2-4.311-1.579-5.661-1.368-1.038-3.108-1.248-4.61-0.713l-0.532-0.403-0.070-0.132c0.37-0.526 0.691-1.076 0.961-1.644l2.417-0.067 0.495-1.58-1.953-1.438c0.095-0.591 0.142-1.189 0.143-1.786l2.167-1.1-0.229-1.64-2.392-0.468c-0.2-0.688-0.466-1.362-0.798-2.011l1.426-1.973-0.954-1.354-2.347 0.682c-0.029-0.031-0.058-0.062-0.088-0.093-0.375-0.388-0.771-0.743-1.184-1.066l0.451-2.321-1.435-0.827-1.781 1.551c-0.577-0.232-1.169-0.415-1.769-0.549l-0.584-2.291-1.651-0.135-0.951 2.172c-0.492 0.030-0.982 0.091-1.468 0.185l-1.454-1.877-1.568 0.533-0.008 2.39c-0.664 0.342-1.303 0.753-1.904 1.236l-2.215-0.998-1.134 1.207 1.134 2.151c-0.366 0.521-0.683 1.067-0.951 1.63l-2.433 0.067-0.495 1.58 1.966 1.448c-0.094 0.586-0.142 1.179-0.144 1.772l-2.18 1.106 0.229 1.64 2.394 0.468c0.143 0.498 0.319 0.989 0.531 1.468l-1.58 1.959 0.881 1.402 2.453-0.573c0.154 0.181 0.315 0.359 0.482 0.532 0.353 0.365 0.723 0.701 1.107 1.008l-0.477 2.459 1.435 0.827 1.873-1.632c0.538 0.216 1.089 0.389 1.649 0.519l0.612 2.401 1.651 0.135 0.991-2.263c0.686-0.041 1.369-0.144 2.041-0.308l1.576 1.825 1.538-0.616-0.083-1.685 0.974 0.739c-0.115 1.597 0.543 3.233 1.909 4.271 1.778 1.349 4.172 1.266 5.877-0.004l-3.51-2.663c-0.619-0.469-0.762-1.358-0.312-1.952s1.328-0.672 1.946-0.202zM13.845 23.736c-1.985-0.224-3.892-1.12-5.388-2.669-3.421-3.538-3.323-9.167 0.216-12.587s9.17-3.36 12.59 0.178c3.012 3.115 3.293 7.878 0.903 11.308l-5.822-4.417c0.11-1.589-0.561-3.21-1.928-4.247-1.778-1.349-4.172-1.266-5.877 0.004l3.51 2.663c0.618 0.469 0.78 1.334 0.33 1.929s-1.346 0.696-1.964 0.226l-3.51-2.663c-0.763 1.983-0.2 4.311 1.579 5.661 1.367 1.036 3.121 1.229 4.628 0.688l4.617 3.503c-1.254 0.428-2.582 0.569-3.883 0.422z"></path>
                    </svg>
                    <span>Última Calibración</span>
                </label>
                <div class="input" [ngClass]="{'is-invalid': isFieldInvalid('ultima_calibracion')}">
                    <mat-form-field appearance="outline">
                        <input matInput [matDatepicker]="picker" formControlName="ultima_calibracion"/>
                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                    </mat-form-field>
                </div>
                <div class="text-error-message" *ngIf="isFieldInvalid('ultima_calibracion')">
                    {{ getErrorMessage('ultima_calibracion') }}
                </div>
            </div>

            <div class="flex-end" style="margin-top: 30px;">
                <button type="submit" class="btn btn-blue">
                    <svg class="icono-1" viewBox="0 0 24 24" fill="currentColor">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M18.1716 1C18.702 1 19.2107 1.21071 19.5858 1.58579L22.4142 4.41421C22.7893 4.78929 23 5.29799 23 5.82843V20C23 21.6569 21.6569 23 20 23H4C2.34315 23 1 21.6569 1 20V4C1 2.34315 2.34315 1 4 1H18.1716ZM4 3C3.44772 3 3 3.44772 3 4V20C3 20.5523 3.44772 21 4 21L5 21L5 15C5 13.3431 6.34315 12 8 12L16 12C17.6569 12 19 13.3431 19 15V21H20C20.5523 21 21 20.5523 21 20V6.82843C21 6.29799 20.7893 5.78929 20.4142 5.41421L18.5858 3.58579C18.2107 3.21071 17.702 3 17.1716 3H17V5C17 6.65685 15.6569 8 14 8H10C8.34315 8 7 6.65685 7 5V3H4ZM17 21V15C17 14.4477 16.5523 14 16 14L8 14C7.44772 14 7 14.4477 7 15L7 21L17 21ZM9 3H15V5C15 5.55228 14.5523 6 14 6H10C9.44772 6 9 5.55228 9 5V3Z"></path>
                    </svg>
                    <span>{{ isEditMode ? 'Actualizar Sensor' : 'Guardar Sensor' }}</span>
                </button>
                <button type="button" class="btn btn-secondary" (click)="onCancel()">
                    <svg class="icono-1" viewBox="0 0 512 512" fill="currentColor">
                        <polygon points="328.96 30.293 298.667 0 164.48 134.4 30.293 0 0 30.293 134.48 164.48 0 298.667 30.293 328.96 164.48 194.56 298.667 328.96 328.96 298.667 194.48 164.48"></polygon>
                    </svg>
                    <span>Cancelar</span>
                </button>
            </div>
        </form>
    </div>
</div>
